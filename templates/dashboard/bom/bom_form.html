{% extends 'partials/base.html' %}
<!--  -->
{% load crispy_forms_tags %}
<!--  -->
{% load static %}
<!--  -->
{% block title %} {{ title }} {% endblock %}
<!--  -->
{% block content %}
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <form method="POST">
        {% csrf_token %}
        <!-- Áp dụng lớp "form-card" -->
        <div class="card shadow-sm form-card">
          <div class="card-header">
            <div class="d-flex justify-content-between align-items-center">
              <h4 class="mb-0"><i class="fas fa-cogs me-2"></i>{{ title }}</h4>
              <div>
                <a
                  href="{% url 'dashboard-bom-list' %}"
                  class="btn btn-secondary btn-sm"
                  >CANCEL</a
                >
                <button class="btn btn-primary btn-sm" type="submit">
                  <i class="fas fa-save me-1"></i> SAVE
                </button>
              </div>
            </div>
          </div>
          <div class="card-body p-4">
            <p class="text-muted">
              Define how to convert a larger unit (From Unit) into a smaller
              unit (To Unit) for a specific product.
            </p>
            <hr />
            {{ form|crispy }}
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
<!--  -->
{% block javascript %}
<script src="{% static 'js/dashboard/bom_form.js' %}"></script>
<script>
  // TRUYỀN DỮ LIỆU TỪ DJANGO SANG JAVASCRIPT
  const productsWithUomCat = {{ products_with_uom_cat_json|safe }};
  const uomsByCat = {{ uoms_by_category_json|safe }};

  // GỌI HÀM KHỞI TẠO
  initializeBomForm(productsWithUomCat, uomsByCat);
</script>
{% endblock %}
